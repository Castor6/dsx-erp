# DSX ERP 项目启动指南

## 环境准备

### 1. 系统要求
- Python 3.11+
- Node.js 18+
- PostgreSQL 14+

### 2. 数据库准备
```sql
-- 创建数据库
CREATE DATABASE dsx_erp;
-- 创建用户（可选）
CREATE USER dsx_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE dsx_erp TO dsx_user;
```

## 后端启动

### 1. 安装依赖
```bash
cd backend
python -m venv .venv
.\.venv\Scripts\activate
pip install -r requirements.txt
```

### 2. 环境配置
```bash
# 复制环境变量模板
copy .env.example .env
# 编辑 .env 文件，配置你的数据库连接信息
```

### 3. 数据库初始化
由于你不需要数据库迁移，可以直接在PostgreSQL中手动创建所需的表结构，或者跳过这一步，FastAPI会在启动时自动创建表。

### 4. 启动后端服务
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 5. 创建管理员用户（可选）
```bash
# 在另一个终端窗口中运行
python create_admin.py
```

## 前端启动

### 1. 安装依赖
```bash
cd frontend
npm install
```

### 2. 安装shadcn/ui组件
```bash
# 初始化shadcn/ui
npx shadcn@latest init

# 安装常用组件
npx shadcn@latest add button
npx shadcn@latest add input
npx shadcn@latest add card
npx shadcn@latest add table
npx shadcn@latest add dialog
npx shadcn@latest add form
npx shadcn@latest add select
npx shadcn@latest add toast
```

### 3. 启动前端服务
```bash
npm run dev
```

## 访问地址

- 前端：http://localhost:3000
- 后端API：http://localhost:8000
- API文档：http://localhost:8000/docs

## 默认管理员账户

- 用户名：admin
- 密码：admin123
- **请及时修改默认密码！**

## 开发工具推荐

### VS Code 插件
- Python
- Pylance
- SQLAlchemy
- ES7+ React/Redux/React-Native snippets
- Tailwind CSS IntelliSense
- Auto Rename Tag

### 数据库工具
- pgAdmin 4
- DBeaver
- DataGrip

## 常用命令

### 后端开发
```bash
# 创建新的数据库迁移
alembic revision --autogenerate -m "描述"

# 执行迁移
alembic upgrade head

# 回滚迁移
alembic downgrade -1

# 查看迁移历史
alembic history

# 启动开发服务器
uvicorn main:app --reload
```

### 前端开发
```bash
# 开发模式
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm start

# 类型检查
npm run type-check

# 代码检查
npm run lint
```

## 项目结构说明

### 后端结构
```
backend/
├── app/
│   ├── api/          # API路由
│   ├── core/         # 核心配置
│   ├── models/       # 数据模型
│   ├── schemas/      # Pydantic模式
│   └── services/     # 业务逻辑（待添加）
├── alembic/          # 数据库迁移
├── main.py           # FastAPI应用入口
└── requirements.txt  # Python依赖
```

### 前端结构
```
frontend/
├── app/              # Next.js App Router
├── components/       # React组件
├── lib/              # 工具函数
├── stores/           # Zustand状态管理
├── types/            # TypeScript类型定义
└── package.json      # Node.js依赖
```

## 下一步开发

1. 完善各个模块的Pydantic schemas
2. 实现完整的CRUD API endpoints
3. 开发前端页面和组件
4. 实现业务逻辑（库存状态转换等）
5. 添加数据验证和错误处理
6. 实现Excel导入功能
7. 添加单元测试
